!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("lib-utilidades",["exports","@angular/core","rxjs/operators","rxjs"],t):t((e=e||self)["lib-utilidades"]={},e.ng.core,e.rxjs.operators,e.rxjs)}(this,(function(e,t,i,n){"use strict";var s=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),o=function(){function e(){}return e.prototype.ngOnInit=function(){},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["lib-lib-utilidades"]],decls:2,vars:0,template:function(e,i){1&e&&(t.ɵɵelementStart(0,"p"),t.ɵɵtext(1," lib-utilidades works! "),t.ɵɵelementEnd())},encapsulation:2}),e}(),r=function(){function e(e){this.disabled=!1,this.id=e&&e.id?e.id:null,this.value=e&&e.value?e.value:null,this.prettyPrint=e&&e.prettyPrint?e.prettyPrint:null,this.original=e&&e.original?e.original:null,this.disabled=e&&!0===e.disabled}return e.prototype._assign=function(e){this.id=e.id,this.value=e.value,this.prettyPrint=e.prettyPrint,this.disabled=!0===e.disabled,this.original=e.original},e}(),l=function(){function e(e){this.isSelect=!1,this.maxResults=null,this.clearOnSelect=e.clearOnSelect?e.clearOnSelect:null,this.delayTime=e.delayTime?e.delayTime:null,this.minCharacters=e.minCharacters?e.minCharacters:null,this.selectedElement=e.selectedElement?e.selectedElement:null,this.control=e.control?e.control:null,this.mapFunction=e.mapFunction?e.mapFunction:null,this.placeholder=e.placeholder?e.placeholder:null,this.isSelect=e.isSelect&&!0===e.isSelect,this.maxResults=e.maxResults?e.maxResults:null}return e.prototype._assign=function(e){this.clearOnSelect=e.clearOnSelect?e.clearOnSelect:this.clearOnSelect,this.delayTime=e.delayTime?e.delayTime:this.delayTime,this.minCharacters=e.minCharacters?e.minCharacters:this.minCharacters,e.selectedElement&&("string"!=typeof e.selectedElement&&"number"!=typeof e.selectedElement?(this.selectedElement=new r,this.selectedElement._assign(e.selectedElement)):this.selectedElement=e.selectedElement),this.control=e.control?e.control:this.control,this.mapFunction=e.mapFunction?e.mapFunction:this.mapFunction,this.placeholder=e.placeholder?e.placeholder:this.placeholder,this.isSelect=e.isSelect&&!0===e.isSelect,this.maxResults=e.maxResults?e.maxResults:null},e}(),u=["inputElement"],a=["inputWrapper"];function c(e,i){1&e&&t.ɵɵelement(0,"div",11)}function p(e,i){if(1&e&&(t.ɵɵelementStart(0,"label",12),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("for",n.id),t.ɵɵadvance(1),t.ɵɵtextInterpolate(n._options.placeholder)}}function h(e,i){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",16),t.ɵɵlistener("mouseenter",(function(){t.ɵɵrestoreView(n);var e=i.index;return t.ɵɵnextContext(3).itemHover(e)}))("click",(function(){t.ɵɵrestoreView(n);var e=i.$implicit,s=i.index;return t.ɵɵnextContext(3).itemClick(e.id,s)})),t.ɵɵelementStart(1,"span",17),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var s=i.$implicit,o=i.index,r=t.ɵɵnextContext(3);t.ɵɵclassProp("disabled",s.disabled)("next",o===r.highlightedItem+1)("active",o===r.highlightedItem),t.ɵɵproperty("tabindex",r.isOpen?0:-1),t.ɵɵadvance(2),t.ɵɵtextInterpolate(s.prettyPrint?s.prettyPrint:s.value)}}function d(e,i){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,h,3,8,"li",15),t.ɵɵelementContainerEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.itemList)}}function m(e,i){1&e&&(t.ɵɵelementStart(0,"li",18),t.ɵɵelementStart(1,"span"),t.ɵɵtext(2,"Buscando..."),t.ɵɵelementEnd(),t.ɵɵelementEnd())}function f(e,i){if(1&e&&(t.ɵɵelementStart(0,"li",18),t.ɵɵelementStart(1,"span"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate1("Digita por lo menos ",n._options.minCharacters," caracteres")}}function y(e,i){1&e&&(t.ɵɵelementStart(0,"li",19),t.ɵɵelementStart(1,"span"),t.ɵɵtext(2,"No se encontraron resultados"),t.ɵɵelementEnd(),t.ɵɵelementEnd())}function g(e,i){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,d,2,1,"ng-container",10),t.ɵɵtemplate(2,m,3,0,"li",13),t.ɵɵtemplate(3,f,3,1,"li",13),t.ɵɵtemplate(4,y,3,0,"li",14),t.ɵɵelementContainerEnd()),2&e){var n=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.itemList.length>0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.isQuerying),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.requiresMinCharacters),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.noResults)}}var b=function(){function e(e){this._disabled=e,this.inputTextValue="",this.disabled=!1,this.isQuerying=!1,this.hasQueried=!1,this.isFocusedInput=!1,this.isFocusedItem=!1,this.requiresMinCharacters=!1,this._options=new l({clearOnSelect:!1,delayTime:600,minCharacters:3,mapFunction:null,control:null,placeholder:"",isSelect:!1,maxResults:null}),this.highlightedItem=-1,this.itemList=[],this.completeList=null,this.bootstrap=!1,this.disabled=null!==e||e&&"DISABLED"===e.toUpperCase()}return Object.defineProperty(e.prototype,"noResults",{get:function(){return!this.isQuerying&&this.hasQueried&&this.itemList.length<1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.listProvider?(this.isFocusedInput||this.isFocusedItem)&&(this.isQuerying||this.hasQueried):this.isFocusedInput||this.isFocusedItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputPlaceholder",{get:function(){return this.bootstrap?this._options.placeholder:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){var t=this;this._options._assign(e),e.control&&e.control.valueChanges.subscribe((function(i){null===i&&(t.inputTextValue=e.placeholder,t._options.control.markAsPristine())}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"provider",{set:function(e){e&&(this.listProvider=e,this._options.selectedElement&&(this.selectItem(this._options.selectedElement),this._options.selectedElement=null),this.createQueryObservable())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{set:function(e){var t=this;if(e){if(e[0]&&!e[0].original){if(this.itemList=this._options.mapFunction?e.map(this._options.mapFunction):e.map((function(e){return new r({id:e.id,value:e.value,disabled:e.disabled})})),this.itemList.forEach((function(t,i){return t.original=e[i]})),this._options.control&&this._options.control.value){var i=this.itemList.find((function(e){return e.id===t._options.control.value}));i&&this.selectItem(i,!1)}}else this.itemList=e,this._options.maxResults&&(this.itemList=this.itemList.slice(0,this._options.maxResults));this._options.selectedElement&&(this.selectItem(this._options.selectedElement,!1),this._options.selectedElement=null),this.completeList||(this.completeList=this.itemList,this._options.isSelect||this.listProvider||(this.itemList=[]))}this.resetFocus()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.itemList&&this.itemList.length>0&&(this.completeList=this.itemList.map((function(e){return e})))},e.prototype.createQueryObservable=function(){var e=this;this.inputObserver=null,n.Observable.create((function(t){return e.inputObserver=t})).pipe(i.distinctUntilChanged(),i.filter((function(t){return t&&t.length>=e._options.minCharacters})),i.tap((function(){e.isQuerying=!0,e.list=[]})),i.debounceTime(this._options.delayTime),i.switchMap(this.listProvider)).subscribe((function(t){e.list=t,e.isQuerying=!1,e.hasQueried=!0}),(function(e){return console.error(e)}))},e.prototype.selectItem=function(e,t){void 0===t&&(t=!0);var i=e instanceof r?e:this.itemList.filter((function(t){return t.id===e}))[0];i&&!i.disabled&&(this.inputTextValue=i.prettyPrint?i.prettyPrint:i.value,this._options.control&&(this._options.control.setValue(i.id,{emitEvent:t}),this._options.control.markAsDirty()),this._options.clearOnSelect&&(this.list=[]),this.selectedItem=i,this.isFocusedInput=!1,this.isFocusedItem=!1,this.isQuerying=!1,this.hasQueried=!1,this.inputWrapper.nativeElement.blur(),this.inputElement.nativeElement.blur())},e.prototype.inputTextKeyDown=function(e){38===e.keyCode&&e.preventDefault()},e.prototype.inputTextKeyUp=function(e){if("ArrowDown"===e.key)this.highlightedItem=this.highlightedItem+1>=this.itemList.length?0:this.highlightedItem+1;else if("ArrowUp"===e.key)this.highlightedItem=this.highlightedItem-1<0?this.itemList.length-1:this.highlightedItem-1;else if("Enter"===e.key&&this.itemList.length>0){var t=this.itemList[this.highlightedItem];this.selectItem(t.id)}},e.prototype.inputChange=function(e){this.inputTextValue=e.target.value,this._options.control.markAsDirty(),this.listProvider?this.fetchList(this.inputTextValue):this._options.isSelect||this.filterlist(this.inputTextValue)},e.prototype.filterlist=function(e){this.list=e&&e.length>=this._options.minCharacters?this.completeList.filter((function(t){return t.prettyPrint?t.prettyPrint.toUpperCase().includes(e.toUpperCase()):t.value.toUpperCase().includes(e.toUpperCase())})):[],this.hasQueried=e.length>=this._options.minCharacters,this.requiresMinCharacters=e.length<this._options.minCharacters},e.prototype.fetchList=function(e){this.inputObserver.next(e),e&&e.length<this._options.minCharacters&&(this.list=[],this.isQuerying=!1,this.hasQueried=!1)},e.prototype.elementFocus=function(){this.onFocus()},e.prototype.elementBlur=function(){this.onBlur()},e.prototype.dropdownMouseEnter=function(){this.isFocusedItem=!0},e.prototype.dropdownMouseLeave=function(){this.isFocusedItem=!1},e.prototype.itemClick=function(e,t){this.highlightedItem=t,this.selectItem(e)},e.prototype.itemHover=function(e){this.highlightedItem=e},e.prototype.onBlur=function(){this._options.control.markAsTouched(),this.isFocusedInput=!1,this.selectedItem&&(this.inputElement.nativeElement.value=this.selectedItem.prettyPrint?this.selectedItem.prettyPrint:this.selectedItem.value),this.inputElement.nativeElement.blur(),this.inputWrapper.nativeElement.blur(),this._options.control&&this._options.control.markAsTouched()},e.prototype.onFocus=function(){this._options.control.markAsUntouched(),this.selectedItem&&this.selectedItem.prettyPrint&&(this.inputElement.nativeElement.value=this.selectedItem.value),this.isFocusedInput=!0,this.resetFocus()},e.prototype.resetFocus=function(){this.itemList&&this.itemList.length>0&&(this.highlightedItem=this._options.isSelect&&this.selectedItem?this.highlightedItem=this.itemList.indexOf(this.selectedItem):0)},e.prototype.wrapperBlur=function(){this._options.isSelect&&this.onBlur()},e.prototype.wrapperFocus=function(){this._options.isSelect?this.onFocus():this.inputElement.nativeElement.focus()},e.ɵfac=function(i){return new(i||e)(t.ɵɵinjectAttribute("disabled"))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["lib-auto-complete"]],viewQuery:function(e,i){var n;(1&e&&(t.ɵɵviewQuery(u,!0),t.ɵɵviewQuery(a,!0)),2&e)&&(t.ɵɵqueryRefresh(n=t.ɵɵloadQuery())&&(i.inputElement=n.first),t.ɵɵqueryRefresh(n=t.ɵɵloadQuery())&&(i.inputWrapper=n.first))},inputs:{id:"id",bootstrap:"bootstrap",options:"options",provider:"provider",list:"list"},decls:11,vars:23,consts:[["class","ios-blur-fix","tabindex","0",4,"ngIf"],[1,"autocomplete-container"],[1,"input-wrapper",3,"tabindex","blur","input","focus","keyup"],["inputWrapper",""],["type","text","autocomplete","off",3,"placeholder","value","tabindex","id","disabled","focus","blur","keydown"],["inputElement",""],["class","placeholder",3,"for",4,"ngIf"],[1,"dropdown-caret"],[1,"input-bottom-border"],[1,"autocomplete-dropdown","list-group",3,"mouseenter","mouseleave"],[4,"ngIf"],["tabindex","0",1,"ios-blur-fix"],[1,"placeholder",3,"for"],["class","list-group-item d-block querying",4,"ngIf"],["class","list-group-item d-block no-results",4,"ngIf"],["class","list-group-item d-block result",3,"disabled","next","active","tabindex","mouseenter","click",4,"ngFor","ngForOf"],[1,"list-group-item","d-block","result",3,"tabindex","mouseenter","click"],[1,"text-capitalize"],[1,"list-group-item","d-block","querying"],[1,"list-group-item","d-block","no-results"]],template:function(e,i){1&e&&(t.ɵɵtemplate(0,c,1,0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2,3),t.ɵɵlistener("blur",(function(){return i.wrapperBlur()}))("input",(function(e){return i.inputChange(e)}))("focus",(function(){return i.wrapperFocus()}))("keyup",(function(e){return i.inputTextKeyUp(e)})),t.ɵɵelementStart(4,"input",4,5),t.ɵɵlistener("focus",(function(){return i.elementFocus()}))("blur",(function(){return i.elementBlur()}))("keydown",(function(e){return i.inputTextKeyDown(e)})),t.ɵɵelementEnd(),t.ɵɵtemplate(6,p,2,2,"label",6),t.ɵɵelement(7,"span",7),t.ɵɵelementEnd(),t.ɵɵelement(8,"div",8),t.ɵɵelementStart(9,"ul",9),t.ɵɵlistener("mouseenter",(function(){return i.dropdownMouseEnter()}))("mouseleave",(function(){return i.dropdownMouseLeave()})),t.ɵɵtemplate(10,g,5,4,"ng-container",10),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("ngIf",i.isOpen),t.ɵɵadvance(1),t.ɵɵclassProp("querying",i.isQuerying)("focused",i.isFocusedInput||i.isFocusedItem)("open",i.isOpen),t.ɵɵadvance(1),t.ɵɵclassProp("form-group",i.bootstrap),t.ɵɵproperty("tabindex",i._options.isSelect?0:-1),t.ɵɵadvance(2),t.ɵɵclassProp("form-control",i.bootstrap),t.ɵɵpropertyInterpolate("id",i.id),t.ɵɵproperty("placeholder",i.inputPlaceholder)("value",i.inputTextValue)("tabindex",i._options.isSelect?-1:0)("disabled",i.disabled),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!i.bootstrap),t.ɵɵadvance(1),t.ɵɵclassProp("is-arrow",i._options.isSelect),t.ɵɵadvance(2),t.ɵɵclassProp("d-none",!i.isOpen),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.itemList))},styles:[""]}),e}(),v=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(v,{declarations:[o,b],exports:[o,b]}),e.AutoCompleteComponent=b,e.AutocompleteItem=r,e.AutocompleteOptions=l,e.LibUtilidadesComponent=o,e.LibUtilidadesModule=v,e.LibUtilidadesService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lib-utilidades.umd.min.js.map